
# Documentação: Execução automática do btop na tty1 com systemd

Este processo configura o `btop` para iniciar automaticamente na tty1 (primeiro terminal virtual), utilizando o systemd e executando como um usuário não-root chamado `btop`. Isso vai DESABILITAR o terminal local!!!

---

### 1. Crie o usuário `btop`

```bash
sudo adduser --disabled-password --gecos "" btop
```

### 2. Crie o arquivo de unidade systemd

```bash
sudo nano /etc/systemd/system/btop-tty.service
```

Cole o seguinte conteúdo:

```ini
[[Unit]
Description=btop
After=multi-user.target docker.service
Requires=docker.service

[Service]
ExecStartPre=/bin/sleep 20
ExecStart=/usr/bin/btop
StandardInput=tty
StandardOutput=tty
TTYPath=/dev/tty1
TTYReset=yes
TTYVHangup=yes
KillMode=process
Restart=always
User=root
WorkingDirectory=/root
CapabilityBoundingSet=CAP_SYS_ADMIN CAP_SYS_PTRACE
AmbientCapabilities=CAP_SYS_ADMIN CAP_SYS_PTRACE
ProtectKernelModules=no
ProtectControlGroups=no
ProcSubset=all

[Install]
WantedBy=multi-user.target
```

### 3. Desative o `getty@tty1` padrão

```bash
sudo systemctl disable getty@tty1.service
```

### 4. Habilite e inicie o novo serviço

```bash
sudo systemctl daemon-reload
sudo systemctl enable btop-tty.service
sudo systemctl start btop-tty.service
sudo reboot
```

---

```bash
sudo nano /home/btop/.bashrc
```

```bash

if [ -x "$(command -v btop)" ]; then
  btop
fi

```
